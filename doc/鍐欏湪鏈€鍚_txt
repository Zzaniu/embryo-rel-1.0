	温馨提醒：本篇不谈任何技术！不谈任何技术！！不谈任何技术！！！技术党慎看。本篇仅谈论作者写完后的一点点感悟（而且文采还不怎么好），如果需要对embryo技术上进一步的了解，请移步doc目录内其他专门的技术文档！
	早在个把月以前，就忍不住想写点东西，等到真正可以动笔的时候又不晓得该写些什么，昨天修复完发布前embryo-1.0的最后一个bug，而就在前天embryo第一次点亮了linux的logo，我想是时候该写些什么东西了。
	embryo，这个名字的本意是“发芽”、“胚芽”的意思，或许当我写下第一行代码的时候，就已经把它当成了我用心呵护的小幼苗，期待有一天能长成参天大树。直到后来，偶然听到一首很燃的歌，里面有一句歌词是这样的“与其苟延残喘，不如纵情燃烧吧，有一天会再发芽”。才突然想起embryo是否也有新生重来的意思？于是脑子一鸡血在start.S文件的开头修改了一行注释。“embryo——萌芽、新生之意”。
	embryo是什么？它其实是一个“轮子”。当初之所以打算写一个bootloader，有一部分原因是因为当时正在阅读一本叫《21天自制操作系统》的书，这本书真的很有意思，刚毕业就买来读了，只要照着它所讲的实现方式，你还真能在一台物理机上写出一个超级可爱的OS，从此也萌生了写个更加有实用价值更加复杂程序的想法。当时年轻嘛，遇到什么都觉得挺有意思，后来又在CSDN看到国内有两个大学生自己写了个名叫lencer的OS，于是脑子一热立即联系了原作者，并表示愿意和他们一起接着完成开发。可是，当我准备参与进去的时候，却被告知该项目基本已经处于废弃状态，没人维护了。没办法，打完鸡血然后又立即被泼冷水的滋味是很不好受的，正巧此时，入职了一家做软硬件设计的公司（也是我一直待到现在的这家公司）。他们主要做硬件板卡以及配套的驱动软件设计，而我作为门外汉真正跨入了嵌入式这个行业，并且第一次接触到了对我而言颇有缘分的国产CPU——龙芯，当时这款CPU型号是龙芯中科面向嵌入式环境推出的一款低功耗性能不错的SOC，也就是embryo目前唯一的宿主板卡龙芯2H。龙芯并没有像其他主流架构一样采用u-boot作为引导，而是采用国外一个死了很多年的项目作为boot，它就是PMON。说实话，刚开始阅读PMON代码的时候是怀着崇高的敬意的，人嘛，总是对自己不知道的领域心怀畏惧，随着对代码逐渐深入的阅读，以及自身技术能力的成长，越发觉得它像个有着大量冗余赘肉的胖子，期间充斥着大量无用的BSD代码和用不到的设计，每次看到它花了四五分钟才把系统引导起来时气喘吁吁的样子，作为一个理想主义的愤青，当时我就怒了，这TM写的是个什么破烂玩意儿，决不能忍！看到这，你也许会认为一个全新的基于龙芯的BIOS即将华丽的诞生在一个普普通通的刚毕业的程序员身上，从此中国出现了一位linus式的伟大程序员。好吧，请停止你的YY，如果它是一个全新的BIOS，那么我就不会在前面说它是个“轮子”了。国内有个很奇怪的风气，作为一个庞大的程序员生产国，为什么很少会有听说某某国内程序员写出个惊天大OS或者吊炸天的开源工具？原因其实有两点：其一，国内很多程序员是不把写代码作为为之倾倒终身的爱好的，相反，认为四五十岁没混上领导岗还整天在coding的程序员绝对是个low货（我也是这么认为的）；其二，也是很重要的一点，尤其体现在OS上，那就是不想重复造轮子，不想写个没有任何人会用的鸡肋，谁会摆着现成的东西不用？况且这些现成的东西（Windows\Linux）还挺好用，在商业上，新诞生的小企业想去挑战早已把控市场的巨头无疑是找死，有句话说得好，“对于已有的垄断性质的巨头公司，能撼动它的必定不会是熟悉的样子”，要想打败现在的巨头企业，唯一的办法只能是开辟新的市场，而且这个市场距离垄断企业的触须越远越好。话说回来，我为什么又要重新造这个轮子呢？可能我还并没有打通自己的任督二脉，还并不具备写一个全新boot的实力，其次，我写这个bootloader的初衷更多的是为了学习一个bootloader而不是为了造一个bootloader，而我的embryo本质上并没有脱离它的大胖子生母PMON。当初决定重写PMON的时候就已经决定，embryo注定是一个学习价值大于商业价值的东西。当然，更深层次的，或许我并不仅仅将coding作为一种谋生的手段吧，或许我心里一直埋藏着打算coding到老的想法，或许，我想就这么当一辈子安安静静的穷编程员也挺好的。
	作为一个只具有学习价值的code，在编写过程中，在吸取PMON设计思想的同时，我也尽量使用更为言简意赅的代码，并且尽最大努力调整代码的结构并增加代码的注释，以便提高代码的可读性。编写一个大型软件并不是想象中那么简单，尤其对于我这过目即忘的记性来说尤其如此。整个代码即使花了快四年的时间，也没有完成当时预期要实现的功能，这不得不说是我很大的一个遗憾吧，或许如果这几年，心态能更好些，对其投入更多心血，没准embryo将会是另一番面貌。编写代码期间，也遇到过各种各样的BUG，往往在实现新功能的过程中，突然把老代码中埋藏的BUG给挖出来了，解决大型项目中的BUG是需要花费相当长的时间的，往往几个小时的苦苦调试后发现，出问题的地方居然还是个很低级的错误。当然，解决一个BUG后或者完成一个新功能后，也是相当有成就感的。至少，当看到自己的bootloader将内核引导起来的那一刻，自己差点在公司的工位上跳起来。
	在编写embryo的过程中，期间遇到的各种设计问题以及低级错误的规模也是以往我在编写小型软件或者修修补补某个内核代码的经历中所没有机会接触到的，这也让我在解决问题的同时获得了编写大型软件的经验，而更重要的是，在我一步一步调试BUG的过程中思维有了进一步开拓，以及慢慢养成了一种定位错误的直觉，这种能力让我遇到问题的时候，能迅速锁定问题引起的可能原因和诱发区域，能迅速从表面现象中摸到错误的产生规律，并迅速运用各种调试手段帮助我以较高的效率解决问题。这也是完成embryo后，最让我获得满足感的地方，因为每遇到一个问题，基本上都能有源源不断思路涌现出来，我总能想到办法或解决它或避开它，从而让embryo接着往前推进，当然也不可否认，PMON作为一个现成的bootloader给我的调试带来了巨大的参照意义。所以，对于一个同样是菜鸟阶段的程序员，如果你对某个软件充满好奇，并且有热情想去彻底弄清楚这个软件的运行机理，如果你有刨根问底的勇气，那么你就去参照它造出一个一模一样甚至更好的轮子来吧！
	embryo断断续续写于2015年中到2019年初，这段时间也是我人生中一段沉闷颓废的阶段。编写embryo代码是我这几年生活的唯二乐趣（另一个是模型），最后这几个月很可耻地利用了上班时间编写的自己的代码，有得必有失，其实在工作上我做的相当失意，当我决定最终发布embryo的时候，我也打算从我工作了四年多的公司离职了。新的公司不见得会有机会再接触到龙芯平台，而2H开发板又太TM贵了，所以新的一年准备全力将embryo往ARM平台上迁移。当embryo快完成的时候听说龙芯中科已经完成了新BIOS的设计，似乎是一个全新的基于UEFI的产品，也挺为国产底层软件感到高兴的，希望龙芯也能越做越好，也希望embryo也能带给正在学习龙芯CPU或者想弄明白一个bootloader流程的有心人带来一些帮助，也算我给国产软件献上的一点绵薄之力。
	最后，感谢embryo陪我走过这几年阴郁的日子，感谢自己终于把embryo写成了一个bootloader应该有的样子，或者，应该说embryo把我变成了一个编程员应该有的样子。

								
								   吴尚文（875421872@qq.com） 写于2019年1月30日










